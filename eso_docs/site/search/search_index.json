{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Documenta\u00e7\u00e3o para desenvolvimento ESO","text":"<p>Este reposit\u00f3rio foi criado para auxiliar futuros alunos de GCES a contribuir com o desenvolvimento no External Secrets Operator(ESO). Relatando possiveis dificuldades que possam encontradas na configura\u00e7\u00e3o do ambiente e no desenvolvimento.</p> <p>A documenta\u00e7\u00e3o est\u00e1 dividida em duas partes, o setup b\u00e1sico/instala\u00e7\u00e3o e um tutorial de como conectar com clusters kubernets locais ou por meio de ferramentas de computa\u00e7\u00e3o em nuvem como a AWS, Google cloud e Azure.</p>"},{"location":"conectando/Local/","title":"Conex\u00e3o ESO local","text":"<p>Aqui ser\u00e1 mostrado como criar um POD e fazer a conex\u00e3o com o ESO. Para fazer testes mais complexos e espec\u00edficos crie o seu pr\u00f3pio cluster Kubernet.</p>"},{"location":"conectando/Local/#configurar-um-pod-basico","title":"Configurar um POD b\u00e1sico","text":""},{"location":"conectando/Local/#ver-pods-existentes-no-namespace-default","title":"Ver pods existentes no namespace \"default\"","text":"<pre><code>kubectl get pods --namespace default --kubeconfig kubeconfig\n</code></pre>"},{"location":"conectando/Local/#criar-o-pod-definido-no-arquivo-podyaml","title":"Criar o Pod definido no arquivo <code>pod.yaml</code>","text":"<pre><code>kubectl apply -f config/pod.yaml --namespace default --kubeconfig kubeconfig\n</code></pre>"},{"location":"conectando/Local/#testar-acesso-ao-postgres","title":"Testar acesso ao Postgres","text":"<p>Fazer \"port forwarding\" para ver se o Postgres est\u00e1 funcionando. Port forwarding \u00e9 \u00f3timo para debugar aplica\u00e7\u00f5es.</p> <pre><code>kubectl port-forward pod/exemplo-postgres 5432:5432 --namespace default --kubeconfig kubeconfig\n</code></pre> <p>Acessar Postgres usando <code>psql</code> (tamb\u00e9m \u00e9 poss\u00edvel usar <code>pgadmin</code>, <code>dbeaver</code> e outras ferramentas).</p> <pre><code>psql --host localhost --port 5432 --username postgres postgres\n</code></pre>"},{"location":"conectando/Local/#deletar-o-pod-criado-anteriormente","title":"Deletar o Pod criado anteriormente","text":"<pre><code>kubectl delete pod/exemplo-postgres --namespace default --kubeconfig kubeconfig\n</code></pre>"},{"location":"conectando/Local/#rodando-o-eso","title":"Rodando o ESO","text":"<p>Para rodar o ESO ser\u00e1 utilizado o tilt, a forma mais simples de se fazer a conex\u00e3o e verificar as modifica\u00e7\u00f5es feitas no c\u00f3digo.</p> <p>Para rodar, v\u00e1 para a raiz do arquivo em que o reposit\u00f3rio foi clonado, e utilize o seguinte comando com o POD subido:</p> <pre><code>make tilt-up\n</code></pre>"},{"location":"setup/1-Pre_requisitos/","title":"Pr\u00e9-requisitos","text":""},{"location":"setup/1-Pre_requisitos/#instalar-golang","title":"Instalar golang","text":"<ul> <li>Instalar golang seguindo os passos em link instala\u00e7\u00e3o golang.</li> </ul>"},{"location":"setup/1-Pre_requisitos/#instalar-helm","title":"Instalar helm","text":"<pre><code>curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3\n\nchmod 700 get_helm.sh\n\n./get_helm.sh\n</code></pre> <ul> <li>Outras op\u00e7\u00f5es de download checar link.</li> </ul>"},{"location":"setup/1-Pre_requisitos/#instalar-yq","title":"Instalar yq","text":"<ul> <li> <p>Instalar binario do yq pelo link e descompactar.</p> </li> <li> <p>Problemas podem ocorrer instalando pelo bin\u00e1rio, caso ocorram tente instalar pelo homebrew ou snap com os comandos:</p> </li> </ul> <pre><code>brew install yq\n\nou\n\nsnap install yq\n</code></pre> <p>Para mais op\u00e7\u00f5es de download checar reposit\u00f3rio oficial yq.</p>"},{"location":"setup/1-Pre_requisitos/#instalar-tilt","title":"Instalar tilt","text":"<ul> <li>Instalar tilt para poder desenvolver e verificar modifica\u00e7\u00f5es no c\u00f3digo seguindo o link.</li> </ul>"},{"location":"setup/2-Configurar_Kubernets/","title":"Instalar e configurar Kubernets","text":""},{"location":"setup/2-Configurar_Kubernets/#instalar-docker","title":"Instalar Docker","text":"<pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh\n\n# testar\nsudo docker version\n</code></pre>"},{"location":"setup/2-Configurar_Kubernets/#instalar-kind-kubernetes-in-docker","title":"Instalar Kind (Kubernetes In Docker)","text":"<p>Para Linux AMD64 / x86_64</p> <pre><code>curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.23.0/kind-linux-amd64\nchmod +x ./kind\nsudo mv ./kind /usr/local/bin/kind\n\n# testar\nkind --version\n</code></pre> <p>Mais op\u00e7\u00f5es de instala\u00e7\u00e3o em https://kind.sigs.k8s.io/docs/user/quick-start/#installation</p>"},{"location":"setup/2-Configurar_Kubernets/#instalar-kubectl","title":"Instalar kubectl","text":"<p>Para Linux AMD64 / x86_64</p> <pre><code>curl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\"\nchmod +x ./kubectl\nsudo mv ./kubectl /usr/local/bin/kubectl\n\n# testar\nkubectl version\n</code></pre> <p>Mais op\u00e7\u00f5es de instala\u00e7\u00e3o em https://kubernetes.io/docs/tasks/tools/#kubectl</p>"},{"location":"setup/2-Configurar_Kubernets/#instalar-helm3","title":"Instalar Helm3","text":"<pre><code>curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3\nchmod 700 get_helm.sh\nsh ./get_helm.sh\n\n# testar\nhelm version\n</code></pre> <p>Mais op\u00e7\u00f5es de instala\u00e7\u00e3o em https://helm.sh/docs/intro/install/</p>"},{"location":"setup/2-Configurar_Kubernets/#configuracao-do-kind","title":"Configura\u00e7\u00e3o do Kind","text":""},{"location":"setup/2-Configurar_Kubernets/#clonar-este-repositorio","title":"Clonar este reposit\u00f3rio","text":"<pre><code>git clone https://github.com/leomichalski/kubernetes-for-devs.git\n</code></pre>"},{"location":"setup/2-Configurar_Kubernets/#navegar-ate-a-pasta-principal-do-repositorio","title":"Navegar at\u00e9 a pasta principal do reposit\u00f3rio","text":"<pre><code>cd kubernetes-for-devs\n</code></pre>"},{"location":"setup/2-Configurar_Kubernets/#comecar-cluster-kubernetes-com-kind","title":"Come\u00e7ar cluster Kubernetes com Kind","text":"<pre><code>kind create cluster --config setup/kind_config.yaml\n</code></pre>"},{"location":"setup/2-Configurar_Kubernets/#salver-arquivo-kubeconfig-para-poder-usar-o-kubectl","title":"Salver arquivo kubeconfig para poder usar o kubectl","text":"<pre><code>kind get kubeconfig --name aula-gces | tee kubeconfig\n</code></pre>"},{"location":"setup/2-Configurar_Kubernets/#testar-kubectl","title":"Testar kubectl","text":"<pre><code>kubectl get nodes --kubeconfig kubeconfig\n</code></pre>"},{"location":"setup/3-Configurar_ESO/","title":"Configurar o External Secrets Operator","text":""},{"location":"setup/3-Configurar_ESO/#clonar-o-repositorio","title":"Clonar o reposit\u00f3rio","text":"<pre><code>git clone https://github.com/external-secrets/external-secrets.git\ncd external-secrets\n</code></pre>"},{"location":"setup/3-Configurar_ESO/#instalar-helm-unittest","title":"Instalar helm-unittest","text":"<p>Instalar helm-unittest para poder realizar testes automatizados no ESO.</p> <pre><code>helm plugin install https://github.com/helm-unittest/helm-unittest\n</code></pre>"},{"location":"setup/3-Configurar_ESO/#build-e-teste","title":"Build e teste","text":"<ul> <li>Para rodar utilize o make:</li> </ul> <pre><code>make build\nmake docker.build IMAGE_NAME=external-secrets IMAGE_TAG=latest\n</code></pre> <ul> <li>Rodar testes:</li> </ul> <pre><code>make test\n</code></pre> <ul> <li>fazer lint no c\u00f3digo:</li> </ul> <pre><code>make lint # OU\ndocker run --rm -v $(pwd):/app -w /app golangci/golangci-lint:v1.49.0 golangci-lint run\n</code></pre> <ul> <li>Rodar a documenta\u00e7\u00e3o:</li> </ul> <pre><code>make docs\n</code></pre>"}]}